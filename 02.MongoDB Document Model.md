# Documents

MongoDB stores data records as BSON documents. BSON is a binary representation of JSON documents, though it contains more data types than JSON.

## BSON Types
[BSON](https://www.mongodb.com/docs/manual/reference/bson-types/#bson-types) is a binary serialization format used to store documents and make remote procedure calls in MongoDB.

### What is BSON
BSON is a binary encoded Javascript Object Notation (JSON)—a textual object notation widely used to transmit and store data across web based applications. JSON is easier to understand as it is human-readable, but compared to BSON, it supports fewer data types. BSON encodes type and length information, too, making it easier for machines to parse.

```
{"hello": "world"} →
\x16\x00\x00\x00           // total document size
\x02                       // 0x02 = type String
hello\x00                  // field name
\x06\x00\x00\x00world\x00  // field value
\x00                       // 0x00 = type EOO ('end of object')
```

### How is BSON Different from JSON?

| Feature         | JSON                                                                 | BSON                                                                                   |
|------------------|----------------------------------------------------------------------|----------------------------------------------------------------------------------------|
| **Type**        | JSON files are written in text format.                               | BSON files are written in binary.                                                     |
| **Speed**       | JSON is fast to read but slower to build.                            | BSON is slow to read but faster to build and scan.                                     |
| **Space**       | JSON data is slightly smaller in byte size.                          | BSON data is slightly larger in byte size.                                            |
| **Encode and Decode** | We can send JSON through APIs without encoding and decoding.         | BSON files are encoded before storing and decoded before displaying.                  |
| **Parse**       | JSON is a human-readable format that doesn't require parsing.        | BSON needs to be parsed as it is machine-generated and not human-readable.            |
| **Data Types**  | JSON has specific data types: string, boolean, number, array, object, and null. | BSON offers additional data types such as `bindata` for binary data and `decimal128` for numeric data. |
| **Usage**       | Used to send data through the network (mostly through APIs).         | Databases use BSON to store data.                                                     |

### Advantages of BSON
The fol­low­ing three char­ac­ter­ist­ics make BSON advantageous to use.

#### Lightweight and Traversable
BSON is lightweight: This makes it possible for a large amount of data to be stored in BSON file format. Additionally, BSON files are easily stored and sent through the network, making them perfect for storing and sending data.

#### Efficient
BSON was made to efficiently store space and scan: In a BSON document, large elements are prefixed with a length field. Documents in BSON use more space than JSON due to the length prefixes and explicit array indices, but thanks to those prefixes, we are able to scan and query much faster. The prefixes make it easy to compare and calculate directly on data, simplifying application code consumption.

#### Handles Additional Data Types
Unlike in JSON, you can find data types such as Bindata, Minkey, Maxkey, Binary Data, ObjectID, Regular Expression, JavaScript, Decimal128, and Date for datetime in BSON. These data types are crucial when working with specialty programs.

For example, when working with financial systems data, you can use BSON’s Decimal128 for 128 bits of high precision decimal representation.

Many modern systems use binary-based floating-point arithmetic to represent exact decimal fractions through Float and double data types. These data types provide approximation but not the precise value. Using BSON in such cases gives you high precision.

Visit BSON data types to find the list of datatypes exclusive to BSON but not to JSON.

### Does MongoDB use BSON or JSON?
MongoDB stores data in BSON format both internally and over the network. Anything you can represent in JSON can be natively stored in MongoDB and retrieved just as easily in JSON.

![JSON to BSON](images/json_to_bson.png)

## Document Structure
MongoDB documents are composed of field-and-value pairs and have the following structure:
```
{
   field1: value1,
   field2: value2,
   field3: value3,
   ...
   fieldN: valueN
}
```
The value of a field can be any of the BSON data types, including other documents, arrays, and arrays of documents. For example, the following document contains values of varying types:

```
var mydoc = {
               _id: ObjectId("5099803df3f4948bd2f98391"),
               name: { first: "Alan", last: "Turing" },
               birth: new Date('Jun 23, 1912'),
               death: new Date('Jun 07, 1954'),
               contribs: [ "Turing machine", "Turing test", "Turingery" ],
               views : NumberLong(1250000)
            }
```
The above fields have the following data types:

- _id holds an ObjectId.
- name holds an embedded document that contains the fields first and last.
- birth and death hold values of the Date type.
- contribs holds an array of strings.
- views holds a value of the NumberLong type.